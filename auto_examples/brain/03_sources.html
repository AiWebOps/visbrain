

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Add deep sources &mdash; visbrain 0.3.3 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../../_static/gallery.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="visbrain 0.3.3 documentation" href="../../index.html"/>
        <link rel="up" title="Examples" href="../index.html"/>
        <link rel="next" title="Connect deep sources" href="04_connectivity.html"/>
        <link rel="prev" title="Add a brain template" href="02_add_brain_template.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> visbrain
          

          
            
            <img src="../../_static/visbrain_128x128.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                0.3.3
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../community.html">Community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../documentation.html">Documentation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Examples</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../index.html#brain-examples">Brain Examples</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="00_brain_control.html">Brain control</a></li>
<li class="toctree-l3"><a class="reference internal" href="01_cross_sections_and_volume.html">Cross-sections and volume control</a></li>
<li class="toctree-l3"><a class="reference internal" href="02_add_brain_template.html">Add a brain template</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Add deep sources</a></li>
<li class="toctree-l3"><a class="reference internal" href="04_connectivity.html">Connect deep sources</a></li>
<li class="toctree-l3"><a class="reference internal" href="05_region_of_interest.html">Add Region of interest (ROI)</a></li>
<li class="toctree-l3"><a class="reference internal" href="06_add_time_series.html">Add time series</a></li>
<li class="toctree-l3"><a class="reference internal" href="07_add_pictures.html">Add pictures</a></li>
<li class="toctree-l3"><a class="reference internal" href="08_screenshot.html">Screenshot example</a></li>
<li class="toctree-l3"><a class="reference internal" href="09_add_multiple_objects.html">Add multiple objects to the scene</a></li>
<li class="toctree-l3"><a class="reference internal" href="10_add_nifti_volume.html">Add Nifti volume</a></li>
<li class="toctree-l3"><a class="reference internal" href="11_convert_mesh_data.html">Convert mesh data</a></li>
<li class="toctree-l3"><a class="reference internal" href="12_colorbar_control.html">Colorbar control</a></li>
<li class="toctree-l3"><a class="reference internal" href="13_load_gui_config.html">Load Graphical User Interface configuration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#colorbar-examples">Colorbar Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#figure-examples">Figure Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#ndviz-examples">Ndviz Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#sleep-examples">Sleep Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#topoplot-examples">Topoplot Examples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../changelog_futur.html">Changelog and future directions</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">visbrain</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Examples</a> &raquo;</li>
        
      <li>Add deep sources</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/auto_examples/brain/03_sources.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="add-deep-sources">
<span id="sphx-glr-auto-examples-brain-03-sources-py"></span><h1>Add deep sources<a class="headerlink" href="#add-deep-sources" title="Permalink to this headline">¶</a></h1>
<p>Add sources to the scene. This script also illustrate most of the controls for
sources. Each source is defined by a (x, y, z) MNI coordinate. Then, we can
attach some data to sources and project this activity onto the surface
(cortical projection). Alternatively, you can run the cortical repartition
which is defined as the number of contributing sources per vertex.</p>
<p>Download source’s coordinates (xyz_sample.npz) :
<a class="reference external" href="https://drive.google.com/open?id=0B6vtJiCQZUBvSFJvaTFSRDJvMEE">https://drive.google.com/open?id=0B6vtJiCQZUBvSFJvaTFSRDJvMEE</a></p>
<img alt="../../_images/ex_sources.png" src="../../_images/ex_sources.png" />
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">visbrain</span> <span class="kn">import</span> <span class="n">Brain</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>

<span class="c1"># Define a empty dictionnary :</span>
<span class="n">kwargs</span> <span class="o">=</span> <span class="p">{}</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Load the xyz coordinates and corresponding subject name</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="n">mat</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;xyz_sample.npz&#39;</span><span class="p">)</span>
<span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;s_xyz&#39;</span><span class="p">],</span> <span class="n">subjects</span> <span class="o">=</span> <span class="n">mat</span><span class="p">[</span><span class="s1">&#39;xyz&#39;</span><span class="p">],</span> <span class="n">mat</span><span class="p">[</span><span class="s1">&#39;subjects&#39;</span><span class="p">]</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">The &quot;subjects&quot; list is composed of 6 diffrents subjects and here we set one</span>
<span class="sd">unique color (u_color) per subject and send it to the interface (s_color).</span>
<span class="sd">We also set the source&#39;s opacity to 0.5.</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="n">u_color</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;#9b59b6&quot;</span><span class="p">,</span> <span class="s2">&quot;#3498db&quot;</span><span class="p">,</span> <span class="s2">&quot;white&quot;</span><span class="p">,</span> <span class="s2">&quot;#e74c3c&quot;</span><span class="p">,</span> <span class="s2">&quot;#34495e&quot;</span><span class="p">,</span> <span class="s2">&quot;#2ecc71&quot;</span><span class="p">]</span>
<span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;s_color&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">u_color</span><span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">k</span><span class="p">[</span><span class="mi">1</span><span class="p">])]</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">subjects</span><span class="p">]</span>
<span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;s_opacity&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.5</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Now we attach data to each source. To illustrate this functionality, the data</span>
<span class="sd">attached is the x coordinate so that data increase from left to right.</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;s_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;s_xyz&#39;</span><span class="p">][:,</span> <span class="mi">0</span><span class="p">]</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">The source&#39;s radius is proportional to the data attached. But this proportion</span>
<span class="sd">can be controlled using a minimum and maximum radius (s_radiusmin, s_radiusmax)</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;s_radiusmin&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span>               <span class="c1"># Minimum radius</span>
<span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;s_radiusmax&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">15</span>              <span class="c1"># Maximum radius</span>
<span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;s_edgecolor&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">)</span>  <span class="c1"># Color of the edges</span>
<span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;s_edgewidth&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="o">.</span><span class="mi">5</span>              <span class="c1"># Width of the edges</span>
<span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;s_symbol&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;square&#39;</span>           <span class="c1"># Source&#39;s symbol</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Next, we mask source&#39;s data that are comprised between [-20, 20] and color</span>
<span class="sd">each source to orange</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="n">mask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">logical_and</span><span class="p">(</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;s_data&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="o">-</span><span class="mi">20</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;s_data&#39;</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="mi">20</span><span class="p">)</span>
<span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;s_mask&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mask</span>
<span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;s_maskcolor&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;orange&#39;</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">After defining sources, it&#39;s possible to run the cortical projection and/or the</span>
<span class="sd">cortical repartition. The lines bellow are used to control the colormap when</span>
<span class="sd">opening the interface.</span>
<span class="sd">Run the projection from the menu Project/Run projection, from the source&#39;s tab</span>
<span class="sd">or using the shortcut CTRL + P (for projection) or CTRL + R (repartition)</span>

<span class="sd">Use CTRL + D to hide/display the quick-settings panel, the shortcut C to</span>
<span class="sd">display the colorbar.</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;s_cmap&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;viridis&#39;</span>           <span class="c1"># Matplotlib colormap</span>
<span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;s_vmin&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="mi">60</span>                 <span class="c1"># Define a minimum</span>
<span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;s_vmax&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">60</span>                  <span class="c1"># Define a maximum</span>
<span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;s_under&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;gray&#39;</span>             <span class="c1"># Values under vmin are set to gray</span>
<span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;s_over&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>  <span class="c1"># Values over vmax are set to black</span>
<span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;s_clim&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mi">70</span><span class="p">,</span> <span class="mi">70</span><span class="p">)</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">It&#39;s also possible to add text to each source. Here, we show the name of the</span>
<span class="sd">subject in yellow.</span>
<span class="sd">To avoid a superposition between the text and sources sphere, we introduce an</span>
<span class="sd">offset to the text using the s_textshift input</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;s_text&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">subjects</span>             <span class="c1"># Name of the subject</span>
<span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;s_textcolor&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;#f39c12&quot;</span>       <span class="c1"># Set to yellow the text color</span>
<span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;s_textsize&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.5</span>              <span class="c1"># Size of the text</span>
<span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;s_textshift&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mf">1.5</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

<span class="c1"># Pass all arguments in the dictionnary :</span>
<span class="n">vb</span> <span class="o">=</span> <span class="n">Brain</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="n">vb</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p><strong>Total running time of the script:</strong> ( 0 minutes  0.000 seconds)</p>
<div class="sphx-glr-footer docutils container">
<div class="sphx-glr-download docutils container">
<a class="reference download internal" href="../../_downloads/03_sources.py" download=""><code class="xref download docutils literal"><span class="pre">Download</span> <span class="pre">Python</span> <span class="pre">source</span> <span class="pre">code:</span> <span class="pre">03_sources.py</span></code></a></div>
<div class="sphx-glr-download docutils container">
<a class="reference download internal" href="../../_downloads/03_sources.ipynb" download=""><code class="xref download docutils literal"><span class="pre">Download</span> <span class="pre">Jupyter</span> <span class="pre">notebook:</span> <span class="pre">03_sources.ipynb</span></code></a></div>
</div>
<p class="sphx-glr-signature"><a class="reference external" href="https://sphinx-gallery.readthedocs.io">Generated by Sphinx-Gallery</a></p>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="04_connectivity.html" class="btn btn-neutral float-right" title="Connect deep sources" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="02_add_brain_template.html" class="btn btn-neutral" title="Add a brain template" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Etienne Combrisson.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'0.3.3',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>