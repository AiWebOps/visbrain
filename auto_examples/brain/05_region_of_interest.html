

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Add Region of interest (ROI) &mdash; visbrain 0.3.9 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../../_static/gallery.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="visbrain 0.3.9 documentation" href="../../index.html"/>
        <link rel="up" title="Examples" href="../index.html"/>
        <link rel="next" title="Add time series" href="06_add_time_series.html"/>
        <link rel="prev" title="Connect deep sources" href="04_connectivity.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> visbrain
          

          
            
            <img src="../../_static/visbrain_128x128.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                0.3.9
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../community.html">Community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../documentation.html">Documentation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Examples</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../index.html#brain-examples">Brain Examples</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="00_brain_control.html">Brain control</a></li>
<li class="toctree-l3"><a class="reference internal" href="01_cross_sections_and_volume.html">Cross-sections and volume control</a></li>
<li class="toctree-l3"><a class="reference internal" href="02_brain_using_vertices.html">Define a brain template using vertices and faces</a></li>
<li class="toctree-l3"><a class="reference internal" href="03_sources.html">Add deep sources</a></li>
<li class="toctree-l3"><a class="reference internal" href="04_connectivity.html">Connect deep sources</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Add Region of interest (ROI)</a></li>
<li class="toctree-l3"><a class="reference internal" href="06_add_time_series.html">Add time series</a></li>
<li class="toctree-l3"><a class="reference internal" href="07_add_pictures.html">Add pictures</a></li>
<li class="toctree-l3"><a class="reference internal" href="08_screenshot.html">Screenshot example</a></li>
<li class="toctree-l3"><a class="reference internal" href="09_add_multiple_objects.html">Add multiple objects to the scene</a></li>
<li class="toctree-l3"><a class="reference internal" href="10_add_nifti_volume.html">Add Nifti volume</a></li>
<li class="toctree-l3"><a class="reference internal" href="11_add_vectors.html">Add vectors</a></li>
<li class="toctree-l3"><a class="reference internal" href="12_parcellize.html">Parcellize brain surface</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#colorbar-examples">Colorbar Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#figure-examples">Figure Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#objects-examples">Objects examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#pysurfer-examples">Pysurfer Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#signal-examples">Signal Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#sleep-examples">Sleep Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#topoplot-examples">Topoplot Examples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../changelog_futur.html">Changelog and future directions</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">visbrain</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Examples</a> &raquo;</li>
        
      <li>Add Region of interest (ROI)</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/auto_examples/brain/05_region_of_interest.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="add-region-of-interest-roi">
<span id="sphx-glr-auto-examples-brain-05-region-of-interest-py"></span><h1>Add Region of interest (ROI)<a class="headerlink" href="#add-region-of-interest-roi" title="Permalink to this headline">¶</a></h1>
<p>This example illustrate how to display Region Of Interest (ROI).</p>
<p>This small dataset (thx to Tarek Lajnef) contains sources inside the thalamus
and alpha power for each source. We are going to display the thalamus, then
project the source’s activity on it.</p>
<img alt="../../_images/ex_region_of_interest.png" src="../../_images/ex_region_of_interest.png" />
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">print_function</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>

<span class="kn">from</span> <span class="nn">visbrain</span> <span class="kn">import</span> <a href="../../brainAPI.html#visbrain.Brain" title="View documentation for visbrain.Brain"><span class="n">Brain</span></a>
<span class="kn">from</span> <span class="nn">visbrain.objects</span> <span class="kn">import</span> <a href="../../objects.html#visbrain.objects.BrainObj" title="View documentation for visbrain.objects.BrainObj"><span class="n">BrainObj</span></a><span class="p">,</span> <a href="../../objects.html#visbrain.objects.SourceObj" title="View documentation for visbrain.objects.SourceObj"><span class="n">SourceObj</span></a><span class="p">,</span> <a href="../../objects.html#visbrain.objects.RoiObj" title="View documentation for visbrain.objects.RoiObj"><span class="n">RoiObj</span></a>
<span class="kn">from</span> <span class="nn">visbrain.io</span> <span class="kn">import</span> <span class="n">download_file</span>

<span class="sd">&quot;&quot;&quot;Download the location of sources closed to the thalamus and the power of</span>
<span class="sd">alpha oscillations</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="n">s_xyz</span> <span class="o">=</span> <a href="http://docs.scipy.org/doc/numpy/reference/generated/numpy.loadtxt.html#numpy.loadtxt" title="View documentation for numpy.loadtxt"><span class="n">np</span><span class="o">.</span><span class="n">loadtxt</span></a><span class="p">(</span><span class="n">download_file</span><span class="p">(</span><span class="s1">&#39;thalamus.txt&#39;</span><span class="p">))</span>
<span class="n">s_data</span> <span class="o">=</span> <a href="http://docs.scipy.org/doc/numpy/reference/generated/numpy.load.html#numpy.load" title="View documentation for numpy.load"><span class="n">np</span><span class="o">.</span><span class="n">load</span></a><span class="p">(</span><span class="n">download_file</span><span class="p">(</span><span class="s1">&#39;Px.npy&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="mf">10e26</span>

<span class="sd">&quot;&quot;&quot;Create a source object</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="n">s_obj</span> <span class="o">=</span> <a href="../../objects.html#visbrain.objects.SourceObj" title="View documentation for visbrain.objects.SourceObj"><span class="n">SourceObj</span></a><span class="p">(</span><span class="s1">&#39;ThalamusSources&#39;</span><span class="p">,</span> <span class="n">s_xyz</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">s_data</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;#ab4642&#39;</span><span class="p">,</span>
                  <span class="n">radius_min</span><span class="o">=</span><span class="mf">10.</span><span class="p">,</span> <span class="n">radius_max</span><span class="o">=</span><span class="mf">20.</span><span class="p">)</span>

<span class="sd">&quot;&quot;&quot;Create a ROI object. The ROI object comes with three default templates :</span>
<span class="sd">* &#39;brodmann&#39; : Brodmann areas</span>
<span class="sd">* &#39;aal&#39; : Automatic Anatomical Labeling</span>
<span class="sd">* &#39;talairach&#39;</span>

<span class="sd">You can also define your own RoiObj with your own labels.</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="n">roi_obj</span> <span class="o">=</span> <a href="../../objects.html#visbrain.objects.RoiObj" title="View documentation for visbrain.objects.RoiObj"><span class="n">RoiObj</span></a><span class="p">(</span><span class="s1">&#39;aal&#39;</span><span class="p">,</span> <span class="n">cblabel</span><span class="o">=</span><span class="s2">&quot;Alpha power&quot;</span><span class="p">,</span> <span class="n">border</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

<span class="sd">&quot;&quot;&quot;Find index of the thalamus and get the mesh.</span>

<span class="sd">If you want to get all of the index of the ROI template use :</span>
<span class="sd">* `roi_obj.get_labels()` : return a pandas DatFrame</span>
<span class="sd">* `roi_obj.get_labels(&#39;/home/&#39;)` : save all supported ROI and labels in an</span>
<span class="sd">  excel file.</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="n">idx_thalamus</span> <span class="o">=</span> <span class="n">roi_obj</span><span class="o">.</span><span class="n">where_is</span><span class="p">(</span><span class="s1">&#39;Thalamus&#39;</span><span class="p">)</span>
<span class="n">roi_obj</span><span class="o">.</span><span class="n">select_roi</span><span class="p">(</span><span class="n">idx_thalamus</span><span class="p">,</span> <span class="n">smooth</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

<span class="sd">&quot;&quot;&quot;Once the ROI object created, we can project source&#39;s alpha modulations</span>
<span class="sd">directly on the thalamus</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="n">roi_obj</span><span class="o">.</span><span class="n">project_sources</span><span class="p">(</span><span class="n">s_obj</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;Spectral_r&#39;</span><span class="p">,</span> <span class="n">clim</span><span class="o">=</span><span class="p">(</span><span class="mf">200.</span><span class="p">,</span> <span class="mf">2000.</span><span class="p">),</span>
                        <span class="n">vmin</span><span class="o">=</span><span class="mf">300.</span><span class="p">,</span> <span class="n">under</span><span class="o">=</span><span class="s1">&#39;gray&#39;</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mf">1800.</span><span class="p">,</span> <span class="n">over</span><span class="o">=</span><span class="s1">&#39;darkred&#39;</span><span class="p">)</span>

<span class="sd">&quot;&quot;&quot;You can also force sources to fit onto the thalamus</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="c1"># s_obj.fit_to_vertices(roi_obj.vertices)</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="n">b_obj</span> <span class="o">=</span> <a href="../../objects.html#visbrain.objects.BrainObj" title="View documentation for visbrain.objects.BrainObj"><span class="n">BrainObj</span></a><span class="p">(</span><span class="s1">&#39;B3&#39;</span><span class="p">)</span>

<span class="c1"># Define a Brain instance :</span>
<span class="n">vb</span> <span class="o">=</span> <a href="../../brainAPI.html#visbrain.Brain" title="View documentation for visbrain.Brain"><span class="n">Brain</span></a><span class="p">(</span><span class="n">brain_obj</span><span class="o">=</span><span class="n">b_obj</span><span class="p">,</span> <span class="n">source_obj</span><span class="o">=</span><span class="n">s_obj</span><span class="p">,</span> <span class="n">roi_obj</span><span class="o">=</span><span class="n">roi_obj</span><span class="p">)</span>

<span class="sd">&quot;&quot;&quot;Select the colorbar of the ROI</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="n">vb</span><span class="o">.</span><span class="n">cbar_select</span><span class="p">(</span><span class="s1">&#39;ROI&#39;</span><span class="p">)</span>

<span class="sd">&quot;&quot;&quot;Eventualy, take a screenshot</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="c1"># vb.screenshot(&#39;thalamus.png&#39;, autocrop=True)</span>

<span class="c1"># Show the interface :</span>
<span class="n">vb</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p><strong>Total running time of the script:</strong> ( 0 minutes  0.000 seconds)</p>
<div class="sphx-glr-footer docutils container">
<div class="sphx-glr-download docutils container">
<a class="reference download internal" href="../../_downloads/05_region_of_interest.py" download=""><code class="xref download docutils literal"><span class="pre">Download</span> <span class="pre">Python</span> <span class="pre">source</span> <span class="pre">code:</span> <span class="pre">05_region_of_interest.py</span></code></a></div>
<div class="sphx-glr-download docutils container">
<a class="reference download internal" href="../../_downloads/05_region_of_interest.ipynb" download=""><code class="xref download docutils literal"><span class="pre">Download</span> <span class="pre">Jupyter</span> <span class="pre">notebook:</span> <span class="pre">05_region_of_interest.ipynb</span></code></a></div>
</div>
<p class="sphx-glr-signature"><a class="reference external" href="https://sphinx-gallery.readthedocs.io">Gallery generated by Sphinx-Gallery</a></p>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="06_add_time_series.html" class="btn btn-neutral float-right" title="Add time series" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="04_connectivity.html" class="btn btn-neutral" title="Connect deep sources" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Etienne Combrisson.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'0.3.9',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>