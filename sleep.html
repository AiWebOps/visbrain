

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>2. Sleep &mdash; visbrain 0.4.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="_static/gallery.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="visbrain 0.4.0 documentation" href="index.html"/>
        <link rel="up" title="Documentation" href="documentation.html"/>
        <link rel="next" title="3. Signal" href="signal.html"/>
        <link rel="prev" title="1.3.1. Main Brain class inputs" href="brainAPI.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> visbrain
          

          
            
            <img src="_static/visbrain_128x128.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                0.4.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="community.html">Community</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="documentation.html">Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="brain.html">1. <code class="docutils literal"><span class="pre">Brain</span></code></a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">2. <code class="docutils literal"><span class="pre">Sleep</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#description">2.1. Description</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#help">2.1.1. Help</a></li>
<li class="toctree-l4"><a class="reference internal" href="#main-features">2.1.2. Main features</a></li>
<li class="toctree-l4"><a class="reference internal" href="#import-and-use-sleep">2.1.3. Import and use sleep</a></li>
<li class="toctree-l4"><a class="reference internal" href="#examples-and-datasets">2.1.4. Examples and datasets</a></li>
<li class="toctree-l4"><a class="reference internal" href="#gui-description">2.1.5. GUI description</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#tutorial">2.2. Tutorial</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#supported-files-and-format">2.2.1. Supported files and format</a></li>
<li class="toctree-l4"><a class="reference internal" href="#load-your-files">2.2.2. Load your files</a></li>
<li class="toctree-l4"><a class="reference internal" href="#time-frequency">2.2.3. Time-frequency</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hypnogram-scoring">2.2.4. Hypnogram scoring</a></li>
<li class="toctree-l4"><a class="reference internal" href="#apply-semi-automatic-detection">2.2.5. Apply semi-automatic detection</a></li>
<li class="toctree-l4"><a class="reference internal" href="#load-and-save-the-gui-configuration">2.2.6. Load and save the GUI configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#import-add-and-save-annotations">2.2.7. Import, add and save annotations</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#api">2.3. API</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#sleep-class">2.3.1. Sleep class</a></li>
<li class="toctree-l4"><a class="reference internal" href="#command-line">2.3.2. Command line</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#collaborators">2.4. Collaborators</a></li>
<li class="toctree-l3"><a class="reference internal" href="#publications">2.5. Publications</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="signal.html">3. <code class="docutils literal"><span class="pre">Signal</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="topo.html">4. <code class="docutils literal"><span class="pre">Topo</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="colorbar.html">5. <code class="docutils literal"><span class="pre">Colorbar</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="figure.html">6. <code class="docutils literal"><span class="pre">Figure</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="objects.html">7. Objects</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="auto_examples/index.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog_futur.html">Changelog and future directions</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">visbrain</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="documentation.html">Documentation</a> &raquo;</li>
        
      <li>2. <code class="docutils literal"><span class="pre">Sleep</span></code></li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/sleep.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="sleep">
<span id="sleepmodule"></span><h1>2. <code class="xref py py-class docutils literal"><span class="pre">Sleep</span></code><a class="headerlink" href="#sleep" title="Permalink to this headline">¶</a></h1>
<div class="figure align-center">
<img alt="_images/sleep_ico.png" src="_images/sleep_ico.png" />
</div>
<div class="section" id="description">
<h2>2.1. Description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p><code class="xref py py-class docutils literal"><span class="pre">Sleep</span></code> is a flexible graphical user interface for visualization, analysis and scoring of polysomnographic sleep data.</p>
<div class="figure align-center">
<img alt="_images/sleep_main.png" src="_images/sleep_main.png" />
</div>
<div class="section" id="help">
<h3>2.1.1. Help<a class="headerlink" href="#help" title="Permalink to this headline">¶</a></h3>
<p>If you need help with the <code class="xref py py-class docutils literal"><span class="pre">Sleep</span></code> module, ask your questions in the dedicated <a class="reference external" href="https://gitter.im/visbrain-python/Sleep?utm_source=share-link&amp;utm_medium=link&amp;utm_campaign=share-link">gitter Sleep chat</a></p>
</div>
<div class="section" id="main-features">
<h3>2.1.2. Main features<a class="headerlink" href="#main-features" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><dl class="first docutils">
<dt><strong>Graphical User Interface (GUI)</strong></dt>
<dd><ul class="first last">
<li>Modular and responsive GUI</li>
<li>Take screenshot with controllable dpi</li>
<li>Save the GUI state (<em>channels, amplitude, panels, checkbox</em>…)</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><strong>Load standard electro-physiological files</strong></dt>
<dd><ul class="first last">
<li>Default supported files : European Data Format, BrainVision, Micromed, Elan</li>
<li>Pass raw data or use MNE-python to load other <a class="reference external" href="https://martinos.org/mne/dev/manual/io.html#importing-eeg-data">file formats</a></li>
<li>Supported extensions for hypnogram files : <strong>.txt</strong>, <strong>.csv</strong>, <strong>.xlsx</strong>, <strong>.hyp</strong>.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><strong>Display</strong></dt>
<dd><ul class="first last">
<li>Polysomnographic data (e.g. EEG, EOG, EMG)</li>
<li>Time-frequency (=spectrogram)</li>
<li>Hypnogram</li>
<li>Topographic map</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><strong>Hypnogram</strong></dt>
<dd><ul class="first last">
<li>Load, edit and save</li>
<li>Real-time computation of sleep statistics</li>
<li>Export high-quality hypnogram figure</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><strong>Signal processing</strong></dt>
<dd><ul class="first last">
<li>De-meaning / de-trending</li>
<li>Filtering</li>
<li>Re-referencing to a reference channel or common average</li>
<li>Bipolarization</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><strong>Semi-automatic events detections</strong></dt>
<dd><ul class="first last">
<li>Spindles, K-complexes, slow waves, rapid eye movements, muscle twitches and peaks (<em>each detection comes with additional and controllable parameters</em>)</li>
<li>Can be performed either on single or multiple channels</li>
<li>Detections are reported on the hypnogram and inside a table</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="import-and-use-sleep">
<h3>2.1.3. Import and use sleep<a class="headerlink" href="#import-and-use-sleep" title="Permalink to this headline">¶</a></h3>
<p>The <code class="xref py py-class docutils literal"><span class="pre">Sleep</span></code> module can be imported as follow :</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">visbrain</span> <span class="kn">import</span> <span class="n">Sleep</span>
</pre></div>
</div>
</div>
<div class="section" id="examples-and-datasets">
<h3>2.1.4. Examples and datasets<a class="headerlink" href="#examples-and-datasets" title="Permalink to this headline">¶</a></h3>
<p>To try out in the absence of sleep data, please check out some <a class="reference external" href="http://visbrain.org/auto_examples/index.html#sleep-examples">sleep example</a> scripts and datasets on <a class="reference external" href="https://drive.google.com/drive/folders/0B6vtJiCQZUBvRjc3cFFYcmFIeW8?usp=sharing">Google drive</a></p>
</div>
<div class="section" id="gui-description">
<h3>2.1.5. GUI description<a class="headerlink" href="#gui-description" title="Permalink to this headline">¶</a></h3>
<div class="section" id="components">
<h4>2.1.5.1. Components<a class="headerlink" href="#components" title="Permalink to this headline">¶</a></h4>
<p>The <code class="xref py py-class docutils literal"><span class="pre">Sleep</span></code> GUI is divided into 4 main parts:</p>
<div class="figure align-center">
<img alt="_images/sleep_main_parts.png" src="_images/sleep_main_parts.png" />
</div>
<p><strong>Menu</strong> :
The contextual menu allows to perform several functions such as the loading and saving of data files, hypnogram files, screenshots, GUI configuration.. It is also useful to control the visbility of each panel, display a list of shortcuts, or open the documentation.</p>
<dl class="docutils">
<dt><strong>Main window</strong> :</dt>
<dd><ul class="first last simple">
<li>Polysomnographic data</li>
<li>Spectrogram (= time-frequency) of the whole recording</li>
<li>Hypnogram</li>
<li>Topoplot (<em>hidden by default</em>)</li>
</ul>
</dd>
<dt><strong>Navigation bar</strong> :</dt>
<dd><ul class="first last simple">
<li><em>Go to</em> : go to the time location of your choice</li>
<li><em>Window</em> : length of the displayed time window</li>
<li><em>Slider step</em> : step between each consecutive window</li>
<li><em>Rule</em> : display unit in second, minute or hours</li>
<li><em>Grid</em> : display the grid on the hypnogram and channel plot</li>
<li><em>Magnify</em> : apply a zoom on the signal (e.g. useful to examine short events such as spindles). Alternatively, you can use CTRL + click at any time to zoom on a specific signal and time point.</li>
</ul>
</dd>
</dl>
<p><strong>Settings panel</strong> :
The setting panels is where most of the (advanced) functions of the software are! Among other things, you can control which channel to display, adjust the amplitudes, customize the spectrogram and hypnogram, compute the duration of each sleep stage, add annotations to the recording, and perform a bunch of semi-automatic detection (spindles, K-complexes…). See the section <a class="reference internal" href="#sleep-settings-panel"><span class="std std-ref">Settings panel tabs</span></a> for a description of each tab.</p>
</div>
<div class="section" id="settings-panel-tabs">
<span id="sleep-settings-panel"></span><h4>2.1.5.2. Settings panel tabs<a class="headerlink" href="#settings-panel-tabs" title="Permalink to this headline">¶</a></h4>
<p>There are five settings tabs :</p>
<ul class="simple">
<li><a class="reference internal" href="#paneltab"><span class="std std-ref">Panels</span></a> : manage channel, time-frequency, hypnogram and topographic map</li>
<li><a class="reference internal" href="#toolstab"><span class="std std-ref">Tools</span></a> : signal processing tools (<em>e.g filtering, re-referencing</em>)</li>
<li><a class="reference internal" href="#infotab"><span class="std std-ref">Infos</span></a> : sleep statistics and basic infos on the EEG recording</li>
<li><a class="reference internal" href="#scoringtab"><span class="std std-ref">Scoring</span></a> : a scoring table that can be used to edit the hypnogram</li>
<li><a class="reference internal" href="#detectiontab"><span class="std std-ref">Detections</span></a> : automatic events detections</li>
<li><a class="reference internal" href="#annotationtab"><span class="std std-ref">Annotations</span></a> : manage annotations</li>
</ul>
<div class="section" id="panels">
<span id="paneltab"></span><h5>2.1.5.2.1. Panels<a class="headerlink" href="#panels" title="Permalink to this headline">¶</a></h5>
<p>Manage channel, time-frequency, hypnogram and topographic map</p>
<div class="figure align-center" id="id8">
<img alt="_images/sleep_topo.png" src="_images/sleep_topo.png" />
<p class="caption"><span class="caption-text">The Settings panel: topoplot properties</span></p>
</div>
<ul class="simple">
<li><dl class="first docutils">
<dt><em>Channels</em></dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>Show / hide channels :</dt>
<dd><ul class="first last">
<li>Select the channels to display by clicking on the corresponding checkbox</li>
<li>Alternatively, you can click on display / hide all channels</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Control the amplitude :</dt>
<dd><ul class="first last">
<li>Per channel</li>
<li>By setting all amplitudes at once</li>
<li>Use symmetric amplitudes (-M, +M)</li>
<li>Use automatic amplitude (each amplitude fit to the (minimum, maximum) of the current displayed window)</li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><em>Time-frequency</em></dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>Customize the spectrogram</dt>
<dd><ul class="first last">
<li>Channel on which to compute the time-frequency</li>
<li>Computation method (see <a class="reference internal" href="#time-frequency"><span class="std std-ref">Time-frequency</span></a>)</li>
<li>Starting and ending frequencies</li>
<li>Time length window and overlap</li>
<li>Colormap</li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><em>Hypnogram</em></dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>Customize the hypnogram</dt>
<dd><ul class="first last">
<li>line width and line color</li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><em>Topoplot</em></dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>Customize the topographic map (topoplot)</dt>
<dd><ul class="first last">
<li>Show / hide topoplot</li>
<li>Display either the filtered signal, the amplitude or the power in specific frequency band</li>
<li>Colormap control</li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="tools">
<span id="toolstab"></span><h5>2.1.5.2.2. Tools<a class="headerlink" href="#tools" title="Permalink to this headline">¶</a></h5>
<p>Signal processing and re-referencing tools.</p>
<div class="figure align-center" id="id9">
<img alt="_images/sleep_filtering.png" src="_images/sleep_filtering.png" />
<p class="caption"><span class="caption-text">Bandpass filter (12-14 Hz) applied on all channels.</span></p>
</div>
<ul class="simple">
<li><dl class="first docutils">
<dt>Signal processing (<em>apply in real time</em>)</dt>
<dd><ul class="first last">
<li>Apply de-meaning and de-trending</li>
<li>filtering* and re-referencing which are applied directly on the signal and spectrogram (see image above)</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Re-referencing</dt>
<dd><ul class="first last">
<li>Common average</li>
<li>Bipolarization (useful for intra-cranial EEG data)</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="infos">
<span id="infotab"></span><h5>2.1.5.2.3. Infos<a class="headerlink" href="#infos" title="Permalink to this headline">¶</a></h5>
<p>The Infos panel displays the recording infos (e.g. name and downsampling frequency) as well as the main sleep statistics computed with the hypnogram (see specs below). These values are adjusted in real-time when you edit the hypnogram. Sleep statistics can be exported to <strong>.csv</strong> or <strong>.txt</strong> file.</p>
<div class="figure align-center" id="id10">
<img alt="_images/sleep_info.png" src="_images/sleep_info.png" />
<p class="caption"><span class="caption-text">The Infos panel: sleep statistics and basic infos of the current recording.</span></p>
</div>
<ul class="simple">
<li><dl class="first docutils">
<dt>File properties</dt>
<dd><ul class="first last">
<li>Filename</li>
<li>Sampling frequency</li>
<li>Down-sampling frequency</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Sleep statistics (<em>All values are expressed in minutes</em>):</dt>
<dd><ul class="first last">
<li>Time in Bed (TIB) : total duration of the hypnogram</li>
<li>Total Dark Time (TDT) : duration of the hypnogram from beginning to last period of sleep</li>
<li>Sleep Period Time (SPT) : duration from first to last period of sleep</li>
<li>Wake After Sleep Onset (WASO) : duration of wake periods within SPT</li>
<li>Sleep Efficiency (SE) : TST / TDT * 100 (%)</li>
<li>Total Sleep Time (TST) : SPT - WASO</li>
<li>W, N1, N2, N3 and REM : sleep stages duration</li>
<li>Latencies : latencies of sleep stages from the beginning of the record</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="scoring">
<span id="scoringtab"></span><h5>2.1.5.2.4. Scoring<a class="headerlink" href="#scoring" title="Permalink to this headline">¶</a></h5>
<p>This tab contains the scoring table, i.e. where each stage start and finish. For further informations about how to score your hypnogram see <a class="reference internal" href="#hypnogram-scoring"><span class="std std-ref">Hypnogram scoring</span></a>.</p>
</div>
<div class="section" id="detections">
<span id="detectiontab"></span><h5>2.1.5.2.5. Detections<a class="headerlink" href="#detections" title="Permalink to this headline">¶</a></h5>
<p>Perform semi-automatic detection of phasic events, such as sleep spindles, K-complexes, rapid eye movements…For a full tutorial see <a class="reference internal" href="#apply-detection"><span class="std std-ref">Apply semi-automatic detection</span></a>.</p>
</div>
<div class="section" id="annotations">
<span id="annotationtab"></span><h5>2.1.5.2.6. Annotations<a class="headerlink" href="#annotations" title="Permalink to this headline">¶</a></h5>
<p>Add and edit annotations (annotations are defined by a start and end point, as well as an optional text marker). To quickly add annotations:</p>
<ul class="simple">
<li>Use the <em>Annotate</em> button in the ruler to annotate the entire window</li>
<li>Double click (with left mouse button) on a channel to add an annotation starting and finishing at the mouse cursor location.</li>
</ul>
<p>If you want to import / export annotations, see the <a class="reference internal" href="#import-annotation"><span class="std std-ref">Import, add and save annotations</span></a></p>
</div>
</div>
<div class="section" id="shortcuts">
<h4>2.1.5.3. Shortcuts<a class="headerlink" href="#shortcuts" title="Permalink to this headline">¶</a></h4>
<p>Sleep comes with a bundle of shortcuts that can be used to speed up your productivity. If shortcuts do not work, simply left click on a canvas.</p>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="75%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Keys</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>mouse wheel</td>
<td>Move the current window</td>
</tr>
<tr class="row-odd"><td>double left click</td>
<td>Add annotation under mouse cursor</td>
</tr>
<tr class="row-even"><td>-</td>
<td>Decrease amplitude</td>
</tr>
<tr class="row-odd"><td>+</td>
<td>Increase amplitude</td>
</tr>
<tr class="row-even"><td>a</td>
<td>Score the current epoch as Artefact</td>
</tr>
<tr class="row-odd"><td>w</td>
<td>Score the current epoch as Wake</td>
</tr>
<tr class="row-even"><td>1</td>
<td>Score the current epoch as N1</td>
</tr>
<tr class="row-odd"><td>2</td>
<td>Score the current epoch as N2</td>
</tr>
<tr class="row-even"><td>3</td>
<td>Score the current epoch as N3</td>
</tr>
<tr class="row-odd"><td>r</td>
<td>Score the current epoch as REM</td>
</tr>
<tr class="row-even"><td>b</td>
<td>Previous window</td>
</tr>
<tr class="row-odd"><td>n</td>
<td>Next window</td>
</tr>
<tr class="row-even"><td>s</td>
<td>Display / hide spectrogram</td>
</tr>
<tr class="row-odd"><td>t</td>
<td>Display / hide topoplot</td>
</tr>
<tr class="row-even"><td>h</td>
<td>Display / hide hypnogram</td>
</tr>
<tr class="row-odd"><td>p</td>
<td>Display / hide navigation bar</td>
</tr>
<tr class="row-even"><td>x</td>
<td>Display / hide time axis</td>
</tr>
<tr class="row-odd"><td>g</td>
<td>Display / hide grid</td>
</tr>
<tr class="row-even"><td>z</td>
<td>Enable / disable zoom</td>
</tr>
<tr class="row-odd"><td>i</td>
<td>Enable / disable indicators</td>
</tr>
<tr class="row-even"><td>CTRL + Num</td>
<td>Display / hide the channel Num [0, 9]</td>
</tr>
<tr class="row-odd"><td>CTRL + left click</td>
<td>On a channel canvas, magnify signal under mouse location</td>
</tr>
<tr class="row-even"><td>CTRL + d</td>
<td>Display quick settings panel</td>
</tr>
<tr class="row-odd"><td>CTRL + s</td>
<td>Save hypnogram</td>
</tr>
<tr class="row-even"><td>CTRL + n</td>
<td>Screenshot window</td>
</tr>
<tr class="row-odd"><td>CTRL + e</td>
<td>Display documentation</td>
</tr>
<tr class="row-even"><td>CTRL + t</td>
<td>Display shortcuts window</td>
</tr>
<tr class="row-odd"><td>CTRL + q</td>
<td>Close the window</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="section" id="tutorial">
<h2>2.2. Tutorial<a class="headerlink" href="#tutorial" title="Permalink to this headline">¶</a></h2>
<div class="section" id="supported-files-and-format">
<h3>2.2.1. Supported files and format<a class="headerlink" href="#supported-files-and-format" title="Permalink to this headline">¶</a></h3>
<p><code class="xref py py-class docutils literal"><span class="pre">Sleep</span></code> natively supports several file formats for both electrophysiological and hypnogram data.</p>
<div class="section" id="data-files">
<h4>2.2.1.1. Data files<a class="headerlink" href="#data-files" title="Permalink to this headline">¶</a></h4>
<p>Here’s the list of natively supported file formats:</p>
<ul class="simple">
<li><strong>.vhdr</strong> (BrainVision version 1 and 2)</li>
<li><strong>.edf</strong> (European Data Format)</li>
<li><strong>.trc</strong> (Micromed version 4)</li>
<li><strong>.eeg</strong> (<a class="reference external" href="http://elan.lyon.inserm.fr">ELAN</a>)</li>
</ul>
<p>If MNE-python is installed, this list is extended to (see <a class="reference external" href="https://martinos.org/mne/dev/manual/io.html#importing-eeg-data">also</a>):</p>
<blockquote>
<div><ul class="simple">
<li><strong>.bdf</strong></li>
<li><strong>.gdf</strong></li>
<li><strong>.egi</strong></li>
<li><strong>.mff</strong></li>
<li><strong>.set</strong> (EEGLAB)</li>
<li><strong>.cnt</strong></li>
<li><strong>.vhdr</strong> (<em>BrainVision files can be loaded using either the native library of Sleep or using MNE</em>)</li>
</ul>
</div></blockquote>
<p>Note that once MNE-python is installed, the loading of these file formats is transparent for users. It means that you can load these file formats directly using Sleep graphical user interface or command-line, without any additional steps. We therefore <strong>strongly recommand</strong> to <a class="reference external" href="https://martinos.org/mne/stable/index.html">install MNE-python</a>.</p>
<p>If you have a file format that is currently not supported, <code class="xref py py-class docutils literal"><span class="pre">Sleep</span></code> also provide the ability to directly pass raw data (NumPy array). Please click see this example of how to <a class="reference external" href="http://visbrain.org/auto_examples/sleep/load_matlab.html#sphx-glr-auto-examples-sleep-load-matlab-py">to load a Matlab file</a> and then pass the data directly to Sleep.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<blockquote>
<div><p>If you are having trouble with the loading of .edf files, we recommand installing <a class="reference external" href="https://martinos.org/mne/stable/index.html">MNE-python</a> and then loading your data using the following command:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Sleep</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="s1">&#39;mydata.edf&#39;</span><span class="p">,</span> <span class="n">hypno</span><span class="o">=</span><span class="s1">&#39;myhypno.csv&#39;</span><span class="p">,</span> <span class="n">use_mne</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div></blockquote>
<p class="last">This will force the loading of the .edf files using MNE, which can generally handle more cases and exceptions than the native EDF library implemented in <code class="xref py py-class docutils literal"><span class="pre">Sleep</span></code>.</p>
</div>
<div class="admonition caution">
<p class="first admonition-title">Caution</p>
<p>By default, data are <strong>automatically downsampled to 100 Hz</strong> upon loading. If the sampling frequency of your recording is a power of two (e.g. 256, 512 Hz), we recommand to change the default downsampling value to 128 Hz using the following command:</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="n">Sleep</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="s1">&#39;mydata.edf&#39;</span><span class="p">,</span> <span class="n">hypno</span><span class="o">=</span><span class="s1">&#39;myhypno.csv&#39;</span><span class="p">,</span> <span class="n">downsample</span><span class="o">=</span><span class="mi">128</span><span class="p">)</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="hypnogram">
<h4>2.2.1.2. Hypnogram<a class="headerlink" href="#hypnogram" title="Permalink to this headline">¶</a></h4>
<p>One of the main objective of Sleep is to <strong>facilitate the sharing of data</strong> across laboratories. This involves being able to accomodate for a variety of hypnogram format (unfortunately, there is no current gold standard on how to save hypnogram data). Here’s the list of supported extensions for hypnogram files :</p>
<ul class="simple">
<li><strong>.txt</strong></li>
<li><strong>.csv</strong></li>
<li><strong>.xlsx</strong></li>
<li><strong>.edf</strong> (EDF+)</li>
<li><strong>.hyp</strong> (<a class="reference external" href="http://elan.lyon.inserm.fr">ELAN</a>)</li>
</ul>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Please note that Sleep uses the guidelines of <em>Iber et al. 2007</em> for sleep stage nomenclature (Wake, N1, N2, N3, REM and Artefact). If your hypnogram includes both NREM-S3 and NREM-S4 sleep stages you can add “N4” categories with the corresponding values in the description file. However, keep in mind that S3 and S4 will be merged into N3 during the import to the Sleep module. That also means that if you load and then save your hypnogram in Sleep, you will loose differentiation between S3 and S4 so be sure not to overwrite your original file!</p>
</div>
</div>
<div class="section" id="save-hypnogram">
<h4>2.2.1.3. Save hypnogram<a class="headerlink" href="#save-hypnogram" title="Permalink to this headline">¶</a></h4>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">Since release v0.4, the default hypnogram export format uses stage duration rather than point-per-second encoding. This format avoids potential errors caused by downsampling and confusion in the values assigned to each sleep stage (which can drastically differ between two labs, e.g. N2 sleep can be encoded with the value 2 in one lab, and -2 in another lab). However, for retro-compatibility, we still allow user to save and load hypnogram in point-per-second format. Please see the image below to see the difference between stage-duration and point-per-second encoding.</p>
</div>
<div class="figure align-center">
<img alt="_images/hypno_encoding.png" src="_images/hypno_encoding.png" />
</div>
<p>By default, Sleep will save your hypnogram in .txt, using the stage-duration encoding:</p>
<table border="1" class="docutils">
<colgroup>
<col width="45%" />
<col width="55%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Stage</th>
<th class="head">Duration</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>Wake</strong></td>
<td>500</td>
</tr>
<tr class="row-odd"><td><strong>N1</strong></td>
<td>750</td>
</tr>
<tr class="row-even"><td><strong>N2</strong></td>
<td>2000</td>
</tr>
<tr class="row-odd"><td><strong>N3</strong></td>
<td>3000</td>
</tr>
<tr class="row-even"><td><strong>N2</strong></td>
<td>3200</td>
</tr>
<tr class="row-odd"><td>…</td>
<td>…</td>
</tr>
<tr class="row-even"><td><strong>REM</strong></td>
<td>30018</td>
</tr>
<tr class="row-odd"><td><strong>Wake</strong></td>
<td>30100</td>
</tr>
</tbody>
</table>
<p><strong>How to read the example above?</strong></p>
<p>The subject was awake from 0 to 500 seconds, then fell in N1 sleep between 500 to 750 seconds, then in N2 sleep between 750 to 2000 seconds, then in N3 sleep and so on. The subject was awakened in REM sleep, and the recording was stopped shortly after. The total duration of the recording (in seconds) corresponds to the last value of the hypnogram, in that case 30100 seconds.</p>
<p>The main advantages of using such an encoding format for the hypnogram is that it avoids any confusion related to the values used for each sleep stage, and drastically reduces the hypnogram file length without loosing any information. Please note that the software contains command-line functions to convert between point-per-second and stage-duration encoding.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p>If you want to add any relevant informations / comments to the hypnogram, you can do so by adding lines preceded by an asterisk directly within the text file. Sleep will not read any line in the hypnogram that starts with an asterisk mark. For example, you can add the name of the scorer:</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="o">*</span><span class="n">Scorer</span>  <span class="n">John</span>
<span class="o">*</span><span class="n">Date</span>    <span class="mi">05</span><span class="n">_17_2018</span>
<span class="n">Wake</span>     <span class="mi">500</span>
<span class="n">N1</span>       <span class="mi">750</span>
</pre></div>
</div>
</div>
<div class="section" id="elan-hyp-format">
<h5>2.2.1.3.1. Elan .hyp format<a class="headerlink" href="#elan-hyp-format" title="Permalink to this headline">¶</a></h5>
<p>Alternatively, if you prefer point-per-second encoding, you can save your data in .hyp format, which can be read with any text editor. Sleep will create a single .hyp file with 4 header rows and the values presented above for the sleep stages, with the exception that the value assigned to REM sleep will be 5 for compatibility with Elan hypnogram reader.</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p>If your hypnogram was created using another software, and is encoded in point-per-second, it is important that Sleep knows which value is associated with each sleep stage (e.g. 2 = N2 sleep, 4 = REM sleep). To do that, you need to create a simple text file in the same directory as the original hypnogram file,  named: <em>HYPNOFILENAME_description.txt</em>. Checkout this <a class="reference external" href="https://drive.google.com/file/d/0B6vtJiCQZUBvYUFnQS1HWHhjSkE/view?usp=sharing">example</a>.</p>
<p><strong>This text file should contain the following information :</strong></p>
<table border="1" class="last docutils">
<colgroup>
<col width="14%" />
<col width="9%" />
<col width="77%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameters</th>
<th class="head">Values</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Time</td>
<td>1</td>
<td>Hypnogram file contains one value per second</td>
</tr>
<tr class="row-odd"><td>Wake</td>
<td>0</td>
<td>The value assigned to Wake in the hypnogram is 0</td>
</tr>
<tr class="row-even"><td>N1</td>
<td>1</td>
<td>The value assigned to N1 sleep in the hypnogram is 1</td>
</tr>
<tr class="row-odd"><td>N2</td>
<td>2</td>
<td>The value assigned to N2 sleep in the hypnogram is 2</td>
</tr>
<tr class="row-even"><td>N3</td>
<td>3</td>
<td>The value assigned to N3 sleep in the hypnogram is 3</td>
</tr>
<tr class="row-odd"><td>REM</td>
<td>4</td>
<td>The value assigned to REM in the hypnogram is 4</td>
</tr>
<tr class="row-even"><td>Artefact</td>
<td>-1</td>
<td>The value assigned to Artefact in the hypnogram is -1</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="section" id="load-your-files">
<h3>2.2.2. Load your files<a class="headerlink" href="#load-your-files" title="Permalink to this headline">¶</a></h3>
<p>There are four ways to load datasets into Sleep:</p>
<ul class="simple">
<li><a class="reference internal" href="#loadfromgui"><span class="std std-ref">Load file from the GUI</span></a></li>
<li><a class="reference internal" href="#loadfrompath"><span class="std std-ref">Load file from path</span></a></li>
<li><a class="reference internal" href="#loadfromraw"><span class="std std-ref">Load file from raw data</span></a></li>
<li><a class="reference internal" href="#loadfrommne"><span class="std std-ref">Load file using MNE-Python</span></a></li>
</ul>
<div class="section" id="load-file-from-the-gui">
<span id="loadfromgui"></span><h4>2.2.2.1. Load file from the GUI<a class="headerlink" href="#load-file-from-the-gui" title="Permalink to this headline">¶</a></h4>
<p>Don’t send anything, just open the interface and you will have a popup window asking for the filename of your data and hypnogram. If you do not have a hypnogram for your data and/or wish to display only the data, just press Cancel when the hypnogram popup opens.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># Import the Sleep module from visbrain :</span>
<span class="kn">from</span> <span class="nn">visbrain</span> <span class="kn">import</span> <span class="n">Sleep</span>
<span class="c1"># Run the interface :</span>
<span class="n">Sleep</span><span class="p">()</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<div class="figure align-center" id="id11">
<img alt="_images/sleep_open.png" src="_images/sleep_open.png" />
<p class="caption"><span class="caption-text">Popup window for loading your files.</span></p>
</div>
</div>
<div class="section" id="load-file-from-path">
<span id="loadfrompath"></span><h4>2.2.2.2. Load file from path<a class="headerlink" href="#load-file-from-path" title="Permalink to this headline">¶</a></h4>
<p>Instead of leaving inputs arguments empty, send the path to the data :</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># Import the Sleep module from visbrain :</span>
<span class="kn">from</span> <span class="nn">visbrain</span> <span class="kn">import</span> <span class="n">Sleep</span>
<span class="c1"># Define where the data are located :</span>
<span class="n">dfile</span> <span class="o">=</span> <span class="s1">&#39;/home/perso/myfile.eeg&#39;</span>
<span class="c1"># File for the hypogram :</span>
<span class="n">hfile</span> <span class="o">=</span> <span class="s1">&#39;/home/perso/hypno.hyp&#39;</span>
<span class="c1"># If you prefer to start with an empty hypnogram, just pass :</span>
<span class="c1"># hfile = None</span>
<span class="n">Sleep</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">dfile</span><span class="p">,</span> <span class="n">hypno</span><span class="o">=</span><span class="n">hfile</span><span class="p">)</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="load-file-using-mne-python">
<span id="loadfrommne"></span><h4>2.2.2.3. Load file using MNE-Python<a class="headerlink" href="#load-file-using-mne-python" title="Permalink to this headline">¶</a></h4>
<p>Finally, it is possible to load several other file formats using <a class="reference external" href="http://martinos.org/mne/stable/">MNE Python package</a>. The code below shows how to load either BDF, EGI or EEGLab files and pass them to <code class="xref py py-class docutils literal"><span class="pre">Sleep</span></code>.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># Import the Sleep module:</span>
<span class="kn">from</span> <span class="nn">visbrain</span> <span class="kn">import</span> <span class="n">Sleep</span>
<span class="c1"># - Biosemi Data Format (BDF)</span>
<span class="n">data</span> <span class="o">=</span> <span class="s1">&#39;mybdffile.bdf&#39;</span>
<span class="c1"># - EGI format</span>
<span class="c1"># data = &#39;myegifile.egi&#39;</span>
<span class="c1"># - EEGLab</span>
<span class="c1"># data = &#39;myeeglabfile.set&#39;</span>
<span class="c1"># Now, pass all the data to the Sleep module :</span>
<span class="n">Sleep</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="load-file-from-raw-data">
<span id="loadfromraw"></span><h4>2.2.2.4. Load file from raw data<a class="headerlink" href="#load-file-from-raw-data" title="Permalink to this headline">¶</a></h4>
<p>It is possible to manually load raw data and pass them as inputs arguments Sleep. The code below show how to extract raw data from a Matlab .mat file (using SciPy):</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>    <span class="kn">from</span> <span class="nn">scipy.io</span> <span class="kn">import</span> <span class="n">loadmat</span>
<span class="c1"># Import the Sleep module from visbrain:</span>
<span class="kn">from</span> <span class="nn">visbrain</span> <span class="kn">import</span> <span class="n">Sleep</span>
<span class="c1"># Load your dataset :</span>
<span class="n">mat</span> <span class="o">=</span> <span class="n">loadmat</span><span class="p">(</span><span class="s1">&#39;testing_database.mat&#39;</span><span class="p">)</span>
<span class="c1"># Get the data, sampling frequency and channel names:</span>
<span class="n">raw_data</span><span class="p">,</span> <span class="n">raw_sf</span><span class="p">,</span> <span class="n">raw_channels</span> <span class="o">=</span> <span class="n">mat</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">],</span> <span class="n">mat</span><span class="p">[</span><span class="s1">&#39;sf&#39;</span><span class="p">],</span> <span class="n">mat</span><span class="p">[</span><span class="s1">&#39;channels&#39;</span><span class="p">]</span>
<span class="c1"># For the hypnogram :</span>
<span class="n">raw_hypno</span> <span class="o">=</span> <span class="n">mat</span><span class="p">[</span><span class="s1">&#39;hypno&#39;</span><span class="p">]</span>
<span class="c1"># As before, if you prefer to start from a fresh empty one, use:</span>
<span class="c1"># raw_hypno = None or ignore passing this argument.</span>
<span class="c1"># Now, pass all the arguments to the Sleep module:</span>
<span class="n">Sleep</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">raw_data</span><span class="p">,</span> <span class="n">sf</span><span class="o">=</span><span class="n">raw_sf</span><span class="p">,</span> <span class="n">channels</span><span class="o">=</span><span class="n">raw_channels</span><span class="p">,</span>
      <span class="n">hypno</span><span class="o">=</span><span class="n">raw_hypno</span><span class="p">)</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Data must be an array with shape (channels, samples). The number of channels must be the same as in <em>channels</em> variable. If you load an hypnogram this way, it must have the same number of point (i.e same sampling rate) as the data. If your hypnogram comes with a different time base, the simplest way is to export it into a simple txt file and follow the procedure described above.</p>
</div>
</div>
</div>
<div class="section" id="time-frequency">
<span id="id2"></span><h3>2.2.3. Time-frequency<a class="headerlink" href="#time-frequency" title="Permalink to this headline">¶</a></h3>
<p>There are currently three time-frequency methods implemented in Sleep.</p>
<table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="36%" />
<col width="46%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Method</th>
<th class="head">Dependency</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Fourier transform</td>
<td>Fourier-based spectrogram (default)</td>
<td>SciPy</td>
</tr>
<tr class="row-odd"><td>Wavelet</td>
<td>Morlet’s wavelet</td>
<td>None</td>
</tr>
<tr class="row-even"><td>Multitaper</td>
<td>Multitaper-based Wigner spectrogram</td>
<td><a class="reference external" href="https://github.com/hbldh/lspopt">lspopt</a></td>
</tr>
</tbody>
</table>
<div class="figure align-center" id="id12">
<img alt="_images/sleep_spectro_methods.png" src="_images/sleep_spectro_methods.png" />
<p class="caption"><span class="caption-text">Comparison of the 3 methods on a 50 minutes recording (C3 electrode, 0.5-20 Hz).</span></p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In most cases, the multitaper method is the one that gives the best results. To enable it, you must first install the <a class="reference external" href="https://github.com/hbldh/lspopt">lspopt</a> package.</p>
</div>
</div>
<div class="section" id="hypnogram-scoring">
<span id="id4"></span><h3>2.2.4. Hypnogram scoring<a class="headerlink" href="#hypnogram-scoring" title="Permalink to this headline">¶</a></h3>
<p>Sleep offers two possibilities to score the hypnogram: using shortcuts or using the <a class="reference internal" href="#scoretable"><span class="std std-ref">Scoring table</span></a>.</p>
<div class="figure align-center" id="id13">
<img alt="_images/sleep_scoring.png" src="_images/sleep_scoring.png" />
<p class="caption"><span class="caption-text">Hypnogram scoring.</span></p>
</div>
<div class="section" id="navigation">
<span id="id5"></span><h4>2.2.4.1. Navigation<a class="headerlink" href="#navigation" title="Permalink to this headline">¶</a></h4>
<p>This is probably the most useful editing method. While you are scrolling through your data, simply press on your keyboard to insert a sleep stage. Use the key below :</p>
<table border="1" class="docutils">
<colgroup>
<col width="45%" />
<col width="55%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Keys</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>a</td>
<td>Artefact</td>
</tr>
<tr class="row-odd"><td>w</td>
<td>Wake stage</td>
</tr>
<tr class="row-even"><td>1</td>
<td>N1 stage</td>
</tr>
<tr class="row-odd"><td>2</td>
<td>N2 stage</td>
</tr>
<tr class="row-even"><td>3</td>
<td>N3 stage</td>
</tr>
<tr class="row-odd"><td>r</td>
<td>REM stage</td>
</tr>
</tbody>
</table>
<p>After pressing one of those keys, the software will automatically scroll through to the next epoch so that you can continue scoring.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">If no canvas are selected the shortcuts might not work. Simply click on a canvas (on a channel / spectrogram / hypnogram) before starting to score to avoid this issue.</p>
</div>
</div>
<div class="section" id="scoring-table">
<span id="scoretable"></span><h4>2.2.4.2. Scoring table<a class="headerlink" href="#scoring-table" title="Permalink to this headline">¶</a></h4>
<p>The Scoring panel can be used to manually edit the hypnogram values. It contains three columns:</p>
<ul class="simple">
<li><strong>From</strong> : specify where the stage start (<em>in minutes</em>)</li>
<li><strong>To</strong> : specify where the stage finish (<em>in minutes</em>)</li>
<li><strong>Stage</strong> : the stage type (use Art, Wake, N1, N2, N3 or REM. Can be lowercase)</li>
</ul>
<p>At the end of the hypnogram, you can <strong>Add line</strong> or <strong>Remove line</strong> when a line is selected. An other interesting option is that the table is sortable (by clicking on the arrow inside the column name).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You can export either the raw hypnogram values, the hypnogram scoring table, or a high-quality figure of the hypnogram using the  <em>Files &gt; Save</em> contextual menu.</p>
</div>
</div>
</div>
<div class="section" id="apply-semi-automatic-detection">
<span id="apply-detection"></span><h3>2.2.5. Apply semi-automatic detection<a class="headerlink" href="#apply-semi-automatic-detection" title="Permalink to this headline">¶</a></h3>
<p>The Detection panel offers several semi-automatic algorithms for the detection of sleep features such as sleep spindles, K-complexes, rapid eyes movements, slow waves, muscle twitches and peaks. All detection types shared the following parameters :</p>
<ul class="simple">
<li><em>Apply on</em> : choose on which channel to perform the detection<ul>
<li>Selected : apply detection on selected channel</li>
<li>Visible : apply detection on all visible channels</li>
<li>All : apply detection on all channels (even those that are hidden)</li>
</ul>
</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">After performing one of the detection, go to the <em>Location</em> tab to see infos about each detected events (starting and ending points, duration, sleep stage). Select the event to jump to it. Finally, you can export the location table using the File &gt; Save contextual menu.</p>
</div>
<p>Two examples of automatic event detection are shown below.</p>
<div class="section" id="spindles-detection">
<h4>2.2.5.1. Spindles detection<a class="headerlink" href="#spindles-detection" title="Permalink to this headline">¶</a></h4>
<p>This algorithm perform a semi-automatic detection of sleep spindles which are an essential feature of N2 sleep. Sleep spindles are defined as bursts of 12-14 Hz waves that occur for at least 0.5 seconds. They are maximally visible on central electrodes.</p>
<div class="figure align-center" id="id14">
<img alt="_images/sleep_spindles.png" src="_images/sleep_spindles.png" />
<p class="caption"><span class="caption-text">Spindles detection on channel Cz.</span></p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li><dl class="first docutils">
<dt><strong>Parameters</strong></dt>
<dd><ul class="first last">
<li><em>Fmin</em> : Highpass frequency, default 12 Hz</li>
<li><em>Fmax</em> : Lowpass frequency, default 14 Hz</li>
<li><em>Tmin</em> : Minimum duration, default 0.5 second</li>
<li><em>Tmax</em> : Maximum duration, default 2 seconds</li>
<li><em>Threshold</em> : defined as Mean + X * standard deviation of the signal. A  higher threshold will results in a more conservative detection.</li>
<li><em>Perform detection only for NREM sleep</em> : if True and a hypnogram is loaded, then the detection will only be performed on NREM sleep epochs.</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
</div>
<div class="section" id="peaks-detection">
<h4>2.2.5.2. Peaks detection<a class="headerlink" href="#peaks-detection" title="Permalink to this headline">¶</a></h4>
<p>Perform a peak detection.</p>
<div class="figure align-center" id="id15">
<img alt="_images/sleep_peak.png" src="_images/sleep_peak.png" />
<p class="caption"><span class="caption-text">Peaks detection on ECG channel.</span></p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li><dl class="first docutils">
<dt><strong>Parameters</strong></dt>
<dd><ul class="first last">
<li><em>Lookahead</em> : minimum distance between two peaks.</li>
<li><em>Display</em> : display either maximum / minimum / maximum &amp; minimum</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">Please note that the software does not yet allow to automatically score sleep stages. However, if you are interested to collaborate and / or implement your own algorithm, please feel free to contact us.</p>
</div>
</div>
</div>
<div class="section" id="load-and-save-the-gui-configuration">
<h3>2.2.6. Load and save the GUI configuration<a class="headerlink" href="#load-and-save-the-gui-configuration" title="Permalink to this headline">¶</a></h3>
<p>From the <em>Files &gt; Save</em> contextual menu, you can save the GUI configuration. This will save the state of all buttons and properties inside <code class="xref py py-class docutils literal"><span class="pre">Sleep</span></code>. Then, you can recharge the GUI configuration using <em>Files &gt; Load &gt; GUI config</em>.
Alternatively, if you want to use a configuration when running <code class="xref py py-class docutils literal"><span class="pre">Sleep</span></code>, you can use the <em>config_file</em> argument to directly pass the path to a configuration file.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mne</span> <span class="kn">import</span> <span class="n">io</span>
<span class="c1"># Import the Sleep module:</span>
<span class="kn">from</span> <span class="nn">visbrain</span> <span class="kn">import</span> <span class="n">Sleep</span>

<span class="n">Sleep</span><span class="p">(</span><span class="n">config_file</span><span class="o">=</span><span class="s1">&#39;pathto/myconfig.json&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Configuration file are encoded in JSON format, which can be easily read and modified using any text editor.</p>
</div>
</div>
<div class="section" id="import-add-and-save-annotations">
<span id="import-annotation"></span><h3>2.2.7. Import, add and save annotations<a class="headerlink" href="#import-add-and-save-annotations" title="Permalink to this headline">¶</a></h3>
<p><code class="xref py py-class docutils literal"><span class="pre">Sleep</span></code> provides a table for annotations. In this table, specify where the event start, finish and the associated text. Selecting a row of this table center the window around the selected time-code. This allow to quickly navigate even in large files.</p>
<div class="figure align-center" id="id16">
<img alt="_images/sleep_annotations.png" src="_images/sleep_annotations.png" />
<p class="caption"><span class="caption-text">Annotations in Sleep. All annotations are referenced in a table in the quick settings panel (left). Each annotation is then reported in the time axis as a green triangle.</span></p>
</div>
<div class="section" id="import-annotations">
<h4>2.2.7.1. Import annotations<a class="headerlink" href="#import-annotations" title="Permalink to this headline">¶</a></h4>
<p>If the interface is opened, load annotations from the menu <em>Files &gt; Load &gt; Annotations</em>. Otherwise, you can use the input variable <em>annotations</em> to set the path to an existing annotation file that need to be loaded. There is several ways to define annotations :</p>
<ul class="simple">
<li><a class="reference internal" href="#annotations-txt"><span class="std std-ref">Annotations in a text file</span></a></li>
<li><a class="reference internal" href="#annotations-mne"><span class="std std-ref">Using MNE-Python annotations</span></a></li>
<li><a class="reference internal" href="#annotations-mark"><span class="std std-ref">Define only markers</span></a></li>
</ul>
<div class="section" id="annotations-in-a-text-file">
<span id="annotations-txt"></span><h5>2.2.7.1.1. Annotations in a text file<a class="headerlink" href="#annotations-in-a-text-file" title="Permalink to this headline">¶</a></h5>
<p>Annotations can be defined in a <a class="reference external" href="https://drive.google.com/file/d/0B6vtJiCQZUBvSXpmS0FGZ1E4M1U/view?usp=sharing">csv file</a> or in a <a class="reference external" href="https://drive.google.com/file/d/0B6vtJiCQZUBvOENtTks1Z3NLam8/view?usp=sharing">txt file</a> file.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mne</span> <span class="kn">import</span> <span class="n">io</span>
<span class="c1"># Import the Sleep module:</span>
<span class="kn">from</span> <span class="nn">visbrain</span> <span class="kn">import</span> <span class="n">Sleep</span>

<span class="n">Sleep</span><span class="p">(</span><span class="n">annotations</span><span class="o">=</span><span class="s1">&#39;pathto/myannotations.txt&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="using-mne-python-annotations">
<span id="annotations-mne"></span><h5>2.2.7.1.2. Using MNE-Python annotations<a class="headerlink" href="#using-mne-python-annotations" title="Permalink to this headline">¶</a></h5>
<p>Alternatively, you can use annotations from MNE-python and pass your annotations to the <em>annotations</em> variable :</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">mne</span> <span class="kn">import</span> <span class="n">Annotations</span>
<span class="kn">from</span> <span class="nn">visbrain</span> <span class="kn">import</span> <span class="n">Sleep</span>

<span class="c1"># Define the onset, duration and description :</span>
<span class="n">onset</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">117.</span><span class="p">,</span> <span class="mf">256.</span><span class="p">,</span> <span class="mf">312.</span><span class="p">])</span>
<span class="n">durations</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>
<span class="n">description</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="s1">&#39;First event&#39;</span><span class="p">,</span> <span class="s1">&#39;Second event&#39;</span><span class="p">,</span> <span class="s1">&#39;Third event&#39;</span><span class="p">])</span>
<span class="n">annot</span> <span class="o">=</span> <span class="n">Annotations</span><span class="p">(</span><span class="n">onset</span><span class="p">,</span> <span class="n">durations</span><span class="p">,</span> <span class="n">description</span><span class="p">)</span>

<span class="n">Sleep</span><span class="p">(</span><span class="n">annotations</span><span class="o">=</span><span class="n">annot</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="define-only-markers">
<span id="annotations-mark"></span><h5>2.2.7.1.3. Define only markers<a class="headerlink" href="#define-only-markers" title="Permalink to this headline">¶</a></h5>
<p>Annotations can be seen as the combination of a time-code and a label. If you don’t need a label to your event, you can only specify the time-code in seconds:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">visbrain</span> <span class="kn">import</span> <span class="n">Sleep</span>

<span class="c1"># Define the onset :</span>
<span class="n">onset</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">117.</span><span class="p">,</span> <span class="mf">256.</span><span class="p">,</span> <span class="mf">312.</span><span class="p">])</span>

<span class="n">Sleep</span><span class="p">(</span><span class="n">annotations</span><span class="o">=</span><span class="n">onset</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="add-new-annotations">
<h4>2.2.7.2. Add new annotations<a class="headerlink" href="#add-new-annotations" title="Permalink to this headline">¶</a></h4>
<p>To add new annotations :</p>
<ul class="simple">
<li>From the ruler or from the <strong>Annotations</strong> tab of the quick settings panel, use the <strong>Annotate</strong> button to annotate the currently displayed window</li>
<li>Double clicking on a canvas is an other way to quickly add annotations.</li>
</ul>
</div>
<div class="section" id="save-annotations">
<h4>2.2.7.3. Save annotations<a class="headerlink" href="#save-annotations" title="Permalink to this headline">¶</a></h4>
<p>The list of annotations can be exported (either in .txt or .csv) or loaded from the <em>Files</em> contextual menu.</p>
</div>
</div>
</div>
<div class="section" id="api">
<h2>2.3. API<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h2>
<div class="section" id="sleep-class">
<h3>2.3.1. Sleep class<a class="headerlink" href="#sleep-class" title="Permalink to this headline">¶</a></h3>
<p>Here is the list of default Sleep inputs :</p>
<dl class="class">
<dt id="visbrain.Sleep">
<em class="property">class </em><code class="descclassname">visbrain.</code><code class="descname">Sleep</code><span class="sig-paren">(</span><em>data=None, hypno=None, config_file=None, annotations=None, channels=None, sf=None, downsample=100.0, axis=True, href=['art', 'wake', 'rem', 'n1', 'n2', 'n3'], preload=True, use_mne=False, kwargs_mne={}, verbose=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/visbrain/sleep/sleep.html#Sleep"><span class="viewcode-link">[source]</span></a><a class="reference external" href="https://github.com/EtienneCmb/visbrain/tree/master/visbrain/sleep/sleep.py#L14-L223"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#visbrain.Sleep" title="Permalink to this definition">¶</a></dt>
<dd><p>Visualize and edit sleep data.</p>
<p>Use this module to :</p>
<blockquote>
<div><ul class="simple">
<li>Load and visualize polysomnographic data and spectrogram.</li>
<li>Load, edit and save hypnogram from the interface</li>
<li>Perform automatic events detection</li>
<li>Further signal processing tools (de-mean, de-trend and filtering)</li>
<li>Topographic data visualization</li>
</ul>
</div></blockquote>
<p>Sleep has been developped in collaboration with Raphael Vallat.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>data</strong> : string, array_like | None</p>
<blockquote>
<div><p>Polysomnographic data. Must either be a path to a supported file (see
notes) or an array of raw data of shape (n_channels, n_pts). If None,
a dialog window to load the file should appear.</p>
</div></blockquote>
<p><strong>hypno</strong> : array_like | None</p>
<blockquote>
<div><p>Hypnogram data. Should be a raw vector of shape (n_pts,)</p>
</div></blockquote>
<p><strong>config_file</strong> : string | None</p>
<blockquote>
<div><p>Path to the configuration file (.txt)</p>
</div></blockquote>
<p><strong>annotations</strong> : string | None</p>
<blockquote>
<div><p>Path to the annotation file (.txt, .csv). Alternatively, you can pass
an annotation instance of MNE or simply an (N,) array describing
the onset.</p>
</div></blockquote>
<p><strong>channels</strong> : list | None</p>
<blockquote>
<div><p>List of channel names. The length of this list must be n_channels.</p>
</div></blockquote>
<p><strong>sf</strong> : float | None</p>
<blockquote>
<div><p>The sampling frequency of raw data.</p>
</div></blockquote>
<p><strong>downsample</strong> : float | 100.</p>
<blockquote>
<div><p>The downsampling frequency for the data and hypnogram raw data.</p>
</div></blockquote>
<p><strong>axis</strong> : bool | False</p>
<blockquote>
<div><p>Specify if each axis have to contains its own axis. Be carefull
with this option, the rendering can be much slower.</p>
</div></blockquote>
<p><strong>href</strong> : list | [‘art’, ‘wake’, ‘rem’, ‘n1’, ‘n2’, ‘n3’]</p>
<blockquote>
<div><p>List of sleep stages. This list can be used to changed the display
order into the GUI.</p>
</div></blockquote>
<p><strong>preload</strong> : bool | True</p>
<blockquote>
<div><p>Preload data into memory. For large datasets, turn this parameter to
True.</p>
</div></blockquote>
<p><strong>use_mne</strong> : bool | False</p>
<blockquote>
<div><p>Force to load the file using mne.io functions.</p>
</div></blockquote>
<p><strong>kwargs_mne</strong> : dict | {}</p>
<blockquote class="last">
<div><p>Dictionary to pass to the mne.io loading function.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>Supported polysomnographic files : by default, Sleep support .vhdr
(BrainVision), .eeg (Elan), .trc (Micromed) and .edf (European Data
Format). If mne-python is installed, this default list of supported
files is extended to .cnt, .egi, .mff, .edf, .bdf, .gdf, .set, .vhdr.</li>
<li>Supported hypnogram files : by default, Sleep support .txt, .csv and
.hyp hypnogram files.</li>
</ul>
</div>
<div class="deprecated">
<p><span class="versionmodified">Deprecated since version 0.3.4: </span>Input arguments <cite>file</cite> and <cite>hypno_file</cite> has been deprecated in 0.3.4
  release. Use instead the <cite>data</cite> and <cite>hypno</cite> inputs.</p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#visbrain.Sleep.show" title="visbrain.Sleep.show"><code class="xref py py-obj docutils literal"><span class="pre">show</span></code></a>()</td>
<td>Display the graphical user interface.</td>
</tr>
</tbody>
</table>
</div>
<dl class="method">
<dt id="visbrain.Sleep.show">
<code class="descname">show</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/EtienneCmb/visbrain/tree/master/visbrain/pyqt_module.py#L75-L108"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#visbrain.Sleep.show" title="Permalink to this definition">¶</a></dt>
<dd><p>Display the graphical user interface.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="command-line">
<h3>2.3.2. Command line<a class="headerlink" href="#command-line" title="Permalink to this headline">¶</a></h3>
<p>In addition to using Python script, you can also use the following command-lines from a terminal :</p>
<ul class="simple">
<li><a class="reference internal" href="#cli-visbrain-sleep"><span class="std std-ref">visbrain_sleep</span></a> : open the graphical user interface of Sleep.</li>
<li><a class="reference internal" href="#cli-visbrain-fig-hyp"><span class="std std-ref">visbrain_fig_hyp</span></a> : export a hypnogram file (<strong>.txt</strong>, <strong>.csv</strong> or <strong>.hyp</strong>) into a high definition colored or black and white image.</li>
<li><a class="reference internal" href="#cli-visbrain-sleep-stats"><span class="std std-ref">visbrain_sleep_stats</span></a> : Compute sleep statistics from hypnogram file and export them in csv.</li>
</ul>
<div class="section" id="visbrain-sleep">
<span id="cli-visbrain-sleep"></span><h4>2.3.2.1. visbrain_sleep<a class="headerlink" href="#visbrain-sleep" title="Permalink to this headline">¶</a></h4>
<p>Open the graphical user interface of Sleep.</p>
<div class="highlight-shell"><div class="highlight"><pre><span></span>visbrain_sleep <span class="o">[</span>OPTIONS<span class="o">]</span>
</pre></div>
</div>
<p class="rubric">Options</p>
<dl class="option">
<dt id="cmdoption-visbrain-sleep-d">
<code class="descname">-d</code><code class="descclassname"></code><code class="descclassname">, </code><code class="descname">--data</code><code class="descclassname"> &lt;data&gt;</code><a class="headerlink" href="#cmdoption-visbrain-sleep-d" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of the  polysomnographic file to load.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-visbrain-sleep-h">
<code class="descname">-h</code><code class="descclassname"></code><code class="descclassname">, </code><code class="descname">--hypno</code><code class="descclassname"> &lt;hypno&gt;</code><a class="headerlink" href="#cmdoption-visbrain-sleep-h" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of the hypnogram file to load.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-visbrain-sleep-c">
<code class="descname">-c</code><code class="descclassname"></code><code class="descclassname">, </code><code class="descname">--config_file</code><code class="descclassname"> &lt;config_file&gt;</code><a class="headerlink" href="#cmdoption-visbrain-sleep-c" title="Permalink to this definition">¶</a></dt>
<dd><p>Path to a configuration file.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-visbrain-sleep-a">
<code class="descname">-a</code><code class="descclassname"></code><code class="descclassname">, </code><code class="descname">--annotations</code><code class="descclassname"> &lt;annotations&gt;</code><a class="headerlink" href="#cmdoption-visbrain-sleep-a" title="Permalink to this definition">¶</a></dt>
<dd><p>Path to an annotation file.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-visbrain-sleep-downsample">
<code class="descname">--downsample</code><code class="descclassname"> &lt;downsample&gt;</code><a class="headerlink" href="#cmdoption-visbrain-sleep-downsample" title="Permalink to this definition">¶</a></dt>
<dd><p>Down-sampling frequency. Default is 100.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-visbrain-sleep-use-mne">
<code class="descname">--use_mne</code><code class="descclassname"> &lt;use_mne&gt;</code><a class="headerlink" href="#cmdoption-visbrain-sleep-use-mne" title="Permalink to this definition">¶</a></dt>
<dd><p>Load your file using MNE-python. Default is False.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-visbrain-sleep-preload">
<code class="descname">--preload</code><code class="descclassname"> &lt;preload&gt;</code><a class="headerlink" href="#cmdoption-visbrain-sleep-preload" title="Permalink to this definition">¶</a></dt>
<dd><p>Preload data in memory. Default is True</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-visbrain-sleep-show">
<code class="descname">--show</code><code class="descclassname"> &lt;show&gt;</code><a class="headerlink" href="#cmdoption-visbrain-sleep-show" title="Permalink to this definition">¶</a></dt>
<dd><p>Display GUI. Default is True</p>
</dd></dl>

</div>
<div class="section" id="visbrain-fig-hyp">
<span id="cli-visbrain-fig-hyp"></span><h4>2.3.2.2. visbrain_fig_hyp<a class="headerlink" href="#visbrain-fig-hyp" title="Permalink to this headline">¶</a></h4>
<p>Create hypnogram figure from hypnogram file.</p>
<div class="highlight-shell"><div class="highlight"><pre><span></span>visbrain_fig_hyp <span class="o">[</span>OPTIONS<span class="o">]</span>
</pre></div>
</div>
<p class="rubric">Options</p>
<dl class="option">
<dt id="cmdoption-visbrain-fig-hyp-h">
<code class="descname">-h</code><code class="descclassname"></code><code class="descclassname">, </code><code class="descname">--hypno</code><code class="descclassname"> &lt;hypno&gt;</code><a class="headerlink" href="#cmdoption-visbrain-fig-hyp-h" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of the hypnogram file to load (with extension).</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-visbrain-fig-hyp-g">
<code class="descname">-g</code><code class="descclassname"></code><code class="descclassname">, </code><code class="descname">--grid</code><code class="descclassname"> &lt;grid&gt;</code><a class="headerlink" href="#cmdoption-visbrain-fig-hyp-g" title="Permalink to this definition">¶</a></dt>
<dd><p>Add X and Y grids to figure. Default is False.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-visbrain-fig-hyp-c">
<code class="descname">-c</code><code class="descclassname"></code><code class="descclassname">, </code><code class="descname">--color</code><code class="descclassname"> &lt;color&gt;</code><a class="headerlink" href="#cmdoption-visbrain-fig-hyp-c" title="Permalink to this definition">¶</a></dt>
<dd><p>Get colored figure. Default is False (black and white).</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-visbrain-fig-hyp-o">
<code class="descname">-o</code><code class="descclassname"></code><code class="descclassname">, </code><code class="descname">--outfile</code><code class="descclassname"> &lt;outfile&gt;</code><a class="headerlink" href="#cmdoption-visbrain-fig-hyp-o" title="Permalink to this definition">¶</a></dt>
<dd><p>Output filename (with extension).</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-visbrain-fig-hyp-dpi">
<code class="descname">--dpi</code><code class="descclassname"> &lt;dpi&gt;</code><a class="headerlink" href="#cmdoption-visbrain-fig-hyp-dpi" title="Permalink to this definition">¶</a></dt>
<dd><p>Dots per inches (resolution). Default is 300.</p>
</dd></dl>

</div>
<div class="section" id="visbrain-sleep-stats">
<span id="cli-visbrain-sleep-stats"></span><h4>2.3.2.3. visbrain_sleep_stats<a class="headerlink" href="#visbrain-sleep-stats" title="Permalink to this headline">¶</a></h4>
<p>Compute sleep statistics from hypnogram file and export them in csv.</p>
<p>Sleep statistics specifications:</p>
<ul class="simple">
<li>Time in Bed (TIB) : total duration of the hypnogram.</li>
<li>Total Dark Time (TDT) : duration of the hypnogram from beginning
to last period of sleep.</li>
<li>Sleep Period Time (SPT) : duration from first to last period of sleep.</li>
<li>Wake After Sleep Onset (WASO) : duration of wake periods within SPT</li>
<li>Sleep Efficiency (SE) : TST / TDT * 100 (%).</li>
<li>Total Sleep Time (TST) : SPT - WASO.</li>
<li>W, N1, N2, N3 and REM: sleep stages duration.</li>
<li>% (W, … REM) : sleep stages duration expressed in percentages of TDT.</li>
<li>Latencies: latencies of sleep stages from the beginning of the record.</li>
</ul>
<p>(All values except SE and percentages are expressed in minutes)</p>
<div class="highlight-shell"><div class="highlight"><pre><span></span>visbrain_sleep_stats <span class="o">[</span>OPTIONS<span class="o">]</span>
</pre></div>
</div>
<p class="rubric">Options</p>
<dl class="option">
<dt id="cmdoption-visbrain-sleep-stats-h">
<code class="descname">-h</code><code class="descclassname"></code><code class="descclassname">, </code><code class="descname">--hypno</code><code class="descclassname"> &lt;hypno&gt;</code><a class="headerlink" href="#cmdoption-visbrain-sleep-stats-h" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of the hypnogram file to load (with extension).</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-visbrain-sleep-stats-o">
<code class="descname">-o</code><code class="descclassname"></code><code class="descclassname">, </code><code class="descname">--outfile</code><code class="descclassname"> &lt;outfile&gt;</code><a class="headerlink" href="#cmdoption-visbrain-sleep-stats-o" title="Permalink to this definition">¶</a></dt>
<dd><p>Output filename (with extension - <a href="#id6"><span class="problematic" id="id7">*</span></a>.csv). If None, sleep               statistics will only be displayed and not saved into a file</p>
</dd></dl>

</div>
</div>
</div>
<div class="section" id="collaborators">
<h2>2.4. Collaborators<a class="headerlink" href="#collaborators" title="Permalink to this headline">¶</a></h2>
<p>Sleep is developed in collaboration with <a class="reference external" href="https://raphaelvallat.github.io/">Raphael Vallat</a> and <a class="reference external" href="http://bluebrain.epfl.ch/page-143249-en.html">Christian O Reilly</a>.</p>
</div>
<div class="section" id="publications">
<h2>2.5. Publications<a class="headerlink" href="#publications" title="Permalink to this headline">¶</a></h2>
<p>Please reference Sleep using its dedicated article in <a class="reference external" href="http://journal.frontiersin.org/article/10.3389/fninf.2017.00060/full">Frontiers in Neuroinformatics</a>.
Please let us know if you used or plan to use Sleep in any upcoming publications!</p>
<p>Bibtex entry :</p>
<div class="highlight-latex"><div class="highlight"><pre><span></span>@ARTICLE<span class="nb">{</span>10.3389/fninf.2017.00060,
 AUTHOR=<span class="nb">{</span>Combrisson, Etienne and Vallat, Raphael and Eichenlaub, Jean-Baptiste and O&#39;Reilly, Christian and Lajnef, Tarek and Guillot, Aymeric and Ruby, Perrine M. and Jerbi, Karim<span class="nb">}</span>,
 TITLE=<span class="nb">{</span>Sleep: An Open-Source Python Software for Visualization, Analysis, and Staging of Sleep Data<span class="nb">}</span>,
 JOURNAL=<span class="nb">{</span>Frontiers in Neuroinformatics<span class="nb">}</span>,
 VOLUME=<span class="nb">{</span>11<span class="nb">}</span>,
 PAGES=<span class="nb">{</span>60<span class="nb">}</span>,
 YEAR=<span class="nb">{</span>2017<span class="nb">}</span>,
 URL=<span class="nb">{</span>http://journal.frontiersin.org/article/10.3389/fninf.2017.00060<span class="nb">}</span>,
 DOI=<span class="nb">{</span>10.3389/fninf.2017.00060<span class="nb">}</span>,
 ISSN=<span class="nb">{</span>1662-5196<span class="nb">}</span>,
 ABSTRACT=<span class="nb">{</span>We introduce Sleep, a new Python open-source graphical user interface (GUI) dedicated to visualization, scoring and analyses of sleep data. Among its most prominent features are: 1) Dynamic display of polysomnographic data, spectrogram, hypnogram and topographic maps with several customizable parameters, 2) Implementation of several automatic detection of sleep features such as spindles, K-complexes, slow waves and rapid eye movements, 3) Implementation of practical signal processing tools such as re-referencing or filtering, and 4) Display of main descriptive statistics including publication-ready tables and figures.  The software package supports loading and reading raw EEG data from a standard file formats such as European Data Format, in addition to a range of commercial data formats. Most importantly, Sleep is built on top of the VisPy library, which provides GPU-based fast and high-level visualization. As a result, it is capable of efficiently handling and displaying large sleep datasets. Sleep is freely available (http://visbrain.org/sleep) and comes with sample datasets and an extensive documentation. Novel functionalities will continue to be added and open-science community efforts are expected to enhance the capacities of this module.<span class="nb">}</span>
<span class="nb">}</span>
</pre></div>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="signal.html" class="btn btn-neutral float-right" title="3. Signal" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="brainAPI.html" class="btn btn-neutral" title="1.3.1. Main Brain class inputs" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Etienne Combrisson.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.4.0',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>